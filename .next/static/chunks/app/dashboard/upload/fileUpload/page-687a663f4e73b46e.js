(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[535],{255:(e,t,r)=>{"use strict";function n(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return n}}),r(5155),r(7650),r(5744),r(589)},1796:(e,t,r)=>{Promise.resolve().then(r.bind(r,2979))},2146:(e,t,r)=>{"use strict";function n(e){let{reason:t,children:r}=e;return r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}}),r(5262)},2979:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var n=r(5155),a=r(2115),l=r(5695),o=r(7550),s=r(6671),i=r(4995),u=r(6645);let c=r.n(u)()(()=>Promise.all([r.e(4),r.e(277),r.e(423),r.e(272)]).then(r.bind(r,8272)).then(e=>e.RichTextEditor),{loadableGenerated:{webpack:()=>[8272]},ssr:!1,loading:()=>(0,n.jsx)("div",{className:"min-h-[600px] border rounded-lg p-4",children:"Loading editor..."})}),d=e=>({title:"",content:"",isDraft:!0,...e});function f(){let e=(0,l.useRouter)(),t=(0,l.useSearchParams)(),{token:r,user:u}=(0,i.nc)(),[f,b]=(0,a.useState)(()=>{{let e=sessionStorage.getItem("editingPost");if(e)try{let t=JSON.parse(e);return sessionStorage.removeItem("editingPost"),d({...t,isDraft:!1})}catch(e){console.error("Error parsing editing post data:",e)}let r=t.get("edit");if(r)try{let e=JSON.parse(decodeURIComponent(r));return d({...e,isDraft:!1})}catch(e){console.error("Error parsing edit data:",e)}let n=localStorage.getItem("draftPost");return n?JSON.parse(n):d()}}),[p,g]=(0,a.useState)(!1),m=(0,a.useCallback)(()=>{if(!f.title.trim()||!f.content.trim())return void s.oR.error("Please fill in both title and content before proceeding");g(!0);try{let t={...f,updatedAt:new Date().toISOString()};localStorage.setItem("draftPost",JSON.stringify(t));let r=new URLSearchParams;f.id&&r.set("edit",JSON.stringify({id:f.id,title:f.title,subtitle:f.subtitle,content:f.content,category_id:f.category_id,is_published:f.is_published,image:f.image})),e.push("/dashboard/upload/fileUpload/imagefile?".concat(r.toString()))}catch(e){console.error("Error saving draft:",e),s.oR.error("Failed to save draft")}finally{g(!1)}},[f,e]),h=(0,a.useCallback)(()=>{(!f.title&&!f.content||window.confirm("You have unsaved changes. Are you sure you want to leave?"))&&e.back()},[f,e]);return(0,a.useEffect)(()=>{if(!r||!u)return void e.push("/blog")},[u,r,e]),(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,n.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between",children:[(0,n.jsx)("div",{className:"flex items-center space-x-4",children:(0,n.jsxs)("button",{onClick:h,className:"flex items-center cursor-pointer space-x-2 text-gray-600 hover:text-gray-800 transition-colors","aria-label":"Go back",children:[(0,n.jsx)(o.A,{className:"w-5 h-5"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:"Back to home"})]})}),(0,n.jsx)("div",{className:"flex items-center space-x-4",children:(0,n.jsx)("button",{onClick:m,disabled:p,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Saving...":"Next"})})]})}),(0,n.jsxs)("main",{className:"max-w-4xl mx-auto px-6 py-8",children:[(0,n.jsx)("input",{type:"text",value:f.title,onChange:e=>b({...f,title:e.target.value}),placeholder:"New post title here...",className:"w-full text-4xl font-bold mb-6 outline-none bg-transparent"}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(c,{content:f.content,onChange:e=>b({...f,content:e}),placeholder:"Start writing your post here..."})})]})]})}function b(){return(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Loading editor..."})]})})}function p(){return(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)(b,{}),children:(0,n.jsx)(f,{})})}},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{bindSnapshot:function(){return o},createAsyncLocalStorage:function(){return l},createSnapshot:function(){return s}});let r=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class n{disable(){throw r}getStore(){}run(){throw r}exit(){throw r}enterWith(){throw r}static bind(e){return e}}let a="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function l(){return a?new a:new n}function o(e){return a?a.bind(e):n.bind(e)}function s(){return a?a.snapshot():function(e,...t){return e(...t)}}},4995:(e,t,r)=>{"use strict";r.d(t,{nc:()=>l});var n=r(5453),a=r(6786);let l=(0,n.v)()((0,a.Zr)(e=>({user:null,token:null,isAuthenticated:!1,setUser:t=>e({user:t,isAuthenticated:!!t}),setToken:t=>e({token:t}),logout:()=>e({user:null,token:null,isAuthenticated:!1})}),{name:"auth-storage",storage:(0,a.KU)(()=>localStorage)}))},5744:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return n.workAsyncStorageInstance}});let n=r(7828)},6645:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let n=r(8229)._(r(7357));function a(e,t){var r;let a={};"function"==typeof e&&(a.loader=e);let l={...a,...t};return(0,n.default)({...l,modules:null==(r=l.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7357:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let n=r(5155),a=r(2115),l=r(2146);function o(e){return{default:e&&"default"in e?e.default:e}}r(255);let s={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},i=function(e){let t={...s,...e},r=(0,a.lazy)(()=>t.loader().then(o)),i=t.loading;function u(e){let o=i?(0,n.jsx)(i,{isLoading:!0,pastDelay:!0,error:null}):null,s=!t.ssr||!!t.loading,u=s?a.Suspense:a.Fragment,c=t.ssr?(0,n.jsxs)(n.Fragment,{children:[null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(u,{...s?{fallback:o}:{},children:c})}return u.displayName="LoadableComponent",u}},7550:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return n}});let n=(0,r(4054).createAsyncLocalStorage)()}},e=>{var t=t=>e(e.s=t);e.O(0,[287,441,684,358],()=>t(1796)),_N_E=e.O()}]);